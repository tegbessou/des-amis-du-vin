deptrac:
    paths:
        - ./src/BottleInventory
        - ./src/Shared
        - ./src/Security
        - ./src/Country
        - ./src/Tasting

    layers:
        - name: Domain
          collectors:
              - type: directory
                value: .+/Domain/.*

        - name: Application
          collectors:
              - type: directory
                value: .+/Application/.*

        - name: Infrastructure
          collectors:
              - type: directory
                value: .+/Infrastructure/(?!(Webmozart/Assert)).*

        - name: Vendors
          collectors:
              - type: classNameRegex
                value: '#^ApiPlatform\\#'
              - type: classNameRegex
                value: '#^Symfony\\(?!(Contracts\\EventDispatcher))#'
              - type: classNameRegex
                value: '#^Doctrine\\ORM\\(?!(Mapping))#'
              - type: classNameRegex
                value: '#^Webmozart\\Assert\\Assert#'
              - type: classNameRegex
                value: '#^Kreait\\#'
              - type: classNameRegex
                value: '#^Lexik\\#'
              - type: classNameRegex
                value: '#^Vich\\#'
              - type: classNameRegex
                value: '#^CodeBuds#'

        - name: Attributes
          collectors:
              - type: classNameRegex
                value: '#^Doctrine\\ORM\\Mapping#'
              - type: classNameRegex
                value: '#^Override#'#'

        - name: Collection
          collectors:
              - type: classNameRegex
                value: '#^Doctrine\\Common\\Collections#'

        - name: Uuid
          collectors:
              - type: classNameRegex
                value: '#^Ramsey\\#'

        - name: Logger
          collectors:
              - type: classNameRegex
                value: '#^Monolog\\#'
              - type: classNameRegex
                value: '#^Psr\\#'

        - name: Helpers
          collectors:
              - type: classNameRegex
                value: '#^App\\Shared\\Infrastructure\\Webmozart\\Assert#'

        - name: Events
          collectors:
              - type: classNameRegex
                value: '#^Symfony\\Contracts\\EventDispatcher\\#'

    ruleset:
        Domain:
            - Helpers
            - Attributes
            - Events
            - Collection
            - Uuid

        Application:
            - Domain
            - Helpers
            - Attributes
            - Events
            - Collection
            - Uuid

        Infrastructure:
            - Domain
            - Application
            - Vendors
            - Helpers
            - Attributes
            - Collection
            - Uuid
            - Logger

        Helpers:
            - Vendors